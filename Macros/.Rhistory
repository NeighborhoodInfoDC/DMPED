cw_two_or_more_races_2000_2010 = sum(two_or_more_races_2000_2010, na.rm = TRUE)) %>%
ungroup()
# bach <- weights_bypop_2000_to_2010_grouped %>% mutate(percent_bach = cw_bachelors_or_more_cw_2000_2010 / cw_over_25_2000_2010)
# remove(total_wei)
#totals 2000 to 2010 crosswalked over to 2022
Crosswalk_2010_to_2020 <- Crosswalk_2010_to_2020 %>% mutate(GEOID = as.character(tr2010ge) )
total_weights_bypop_2000_to_2020 <- left_join(weights_bypop_2000_to_2010_grouped, Crosswalk_2010_to_2020)
total_weights_bypop_2000_to_2020 <-  total_weights_bypop_2000_to_2020 %>%
mutate(bachelors_or_more_2000_to_2020 = cw_bachelors_or_more_cw_2000_2010 * wt_pop) %>%
mutate(over_25_2000_to_2020 = cw_over_25_2000_2010 * wt_pop) %>%
mutate(pop_2000_to_2020 = cw_pop_cw_2000_2010 * wt_pop) %>% #
mutate(white_alone_2000_2020 = cw_white_alone_2000_2010 * wt_pop) %>%
mutate(black_alone_2000_2020 = cw_black_alone_2000_2010 * wt_pop) %>%
mutate(indigenous_alone_2000_2020 = cw_indigenous_alone_2000_2010 * wt_pop) %>%
mutate(asian_alone_2000_2020 = cw_asian_alone_2000_2010 * wt_pop) %>%
mutate(hispanic_or_latino_2000_2020 = cw_hispanic_or_latino_2000_2010 * wt_pop) %>%
mutate(pacific_alone_2000_2020 = cw_pacific_alone_2000_2010 * wt_pop) %>%
mutate(some_other_race_2000_2020 = cw_some_other_race_2000_2010 * wt_pop) %>%
mutate(two_or_more_races_2000_2020 = cw_two_or_more_races_2000_2010 * wt_pop)
total_weights_2000_2020_grouped <- total_weights_bypop_2000_to_2020 %>%
group_by(tr2020ge) %>%
summarize(cw_pop_2000_2020 = sum(pop_2000_to_2020, na.rm = TRUE),
cw_over_25_2000_2020 = sum(over_25_2000_to_2020, na.rm = TRUE),
cw_bachelors_or_more_2000_to_2020 = sum(bachelors_or_more_2000_to_2020, na.rm = TRUE),
cw_black_alone_2000_2020 = sum(black_alone_2000_2020, na.rm = TRUE),
cw_indigenous_alone_2000_2020 = sum(indigenous_alone_2000_2020, na.rm = TRUE),
cw_asian_alone_2000_2020 = sum(asian_alone_2000_2020, na.rm = TRUE),
cw_pacific_alone_2000_2020 = sum(pacific_alone_2000_2020, na.rm = TRUE),
cw_hispanic_or_latino_2000_2020 = sum(hispanic_or_latino_2000_2020, na.rm = TRUE),
cw_some_other_race_2000_2020 = sum(some_other_race_2000_2020, na.rm = TRUE),
cw_two_or_more_races_2000_2020 = sum(two_or_more_races_2000_2020, na.rm = TRUE)) %>%
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2000_to_2020 / cw_over_25_2000_2020 )
write.csv(total_weights_2000_2020_grouped, "2000_demo_data.csv")
sum(weights_bypop_2000_to_2010_grouped$cw_pop_cw_2000_2010)
sum(weights_bypop_2010_to_2012_grouped$cw_pop_cw_2000_2010)
weights_bypop_2010_2020_grouped$cw_pop_2010_2020
sum(weights_bypop_2010_2020_grouped$cw_pop_2010_2020)
library(tidycensus)
dc_total_population_22 <-
get_acs(geography = "tract",
variable = "B01003_001",
year = 2022,
state = "DC",
geometry = FALSE)
View(dc_total_population_22)
total_weights_2000_2020_grouped <- total_weights_bypop_2000_to_2020 %>%
group_by(tr2020ge) %>%
summarize(cw_pop_2000_2020 = sum(pop_2000_to_2020, na.rm = TRUE),
cw_over_25_2000_2020 = sum(over_25_2000_to_2020, na.rm = TRUE),
cw_white_alone_2000_2020 = sum(cw_white_alone_2000_2010, na.rm = TRUE),
cw_bachelors_or_more_2000_to_2020 = sum(bachelors_or_more_2000_to_2020, na.rm = TRUE),
cw_black_alone_2000_2020 = sum(black_alone_2000_2020, na.rm = TRUE),
cw_indigenous_alone_2000_2020 = sum(indigenous_alone_2000_2020, na.rm = TRUE),
cw_asian_alone_2000_2020 = sum(asian_alone_2000_2020, na.rm = TRUE),
cw_pacific_alone_2000_2020 = sum(pacific_alone_2000_2020, na.rm = TRUE),
cw_hispanic_or_latino_2000_2020 = sum(hispanic_or_latino_2000_2020, na.rm = TRUE),
cw_some_other_race_2000_2020 = sum(some_other_race_2000_2020, na.rm = TRUE),
cw_two_or_more_races_2000_2020 = sum(two_or_more_races_2000_2020, na.rm = TRUE)) %>%
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2000_to_2020 / cw_over_25_2000_2020 )
write.csv(total_weights_2000_2020_grouped, "2000_demo_data.csv")
Crosswalk_2000_to_2010 <- read_csv("C:/Users/slieberman/Downloads/nhgis_tr2000_tr2010_11/nhgis_tr2000_tr2010_11.csv")
Crosswalk_2010_to_2020 <- read_csv("C:/Users/slieberman/Downloads/nhgis_tr2010_tr2020_11/nhgis_tr2010_tr2020_11.csv")
#totals crosswalk 2000-2010 - pop / bachelors degrees
Crosswalk_2000_to_2010 <- Crosswalk_2000_to_2010 %>% mutate(GEOID = as.character(tr2000ge))
total_weights_bypop_2000_to_2010 <- left_join(dc_total_population_2000, Crosswalk_2000_to_2010, by = "GEOID")
total_weights_bypop_2000_to_2010 <- total_weights_bypop_2000_to_2010  %>% rename(population = value)
total_weights_bypop_2000_to_2010 <- left_join(percent_bachelors_over_25_2000, total_weights_bypop_2000_to_2010, by = "GEOID")
total_weights_bypop_2000_to_2010 <- total_weights_bypop_2000_to_2010 %>% select(-c(3:45))
total_weights_bypop_2000_to_2010 <- total_weights_bypop_2000_to_2010 %>% select(-NAME, -variable)
total_weights_bypop_2000_to_2010 <- left_join(total_weights_bypop_2000_to_2010, race_2000)
#multiply across the crosswalk
total_weights_bypop_2000_to_2010 <- total_weights_bypop_2000_to_2010 %>%
mutate(over_25_2000_2010 = over_25 * wt_pop) %>%
mutate(bachelors_or_more_cw_2000_2010 =  bachelors_or_more * wt_pop) %>%
mutate(pop_cw_2000_2010 = population * wt_pop) %>%
mutate(white_alone_2000_2010 = white_alone * wt_pop) %>%
mutate(black_alone_2000_2010 = black_alone * wt_pop) %>%
mutate(indigenous_alone_2000_2010 = indigenous_alone * wt_pop) %>%
mutate(asian_alone_2000_2010 = asian_alone * wt_pop) %>%
mutate(hispanic_or_latino = hispanic_or_latino * wt_pop) %>%
mutate(pacific_alone_2000_2010 = pacific * wt_pop) %>%
mutate(some_other_race_2000_2010 = some_other_race * wt_pop) %>%
mutate(two_or_more_races_2000_2010 = some_other_race * wt_pop)
#group and divide
weights_bypop_2000_to_2010_grouped <- total_weights_bypop_2000_to_2010 %>%
group_by(tr2010ge) %>%
summarize(cw_over_25_2000_2010 = sum(over_25_2000_2010, na.rm = TRUE),
cw_bachelors_or_more_cw_2000_2010 = sum(bachelors_or_more_cw_2000_2010, na.rm = TRUE),
cw_pop_cw_2000_2010 =  sum(pop_cw_2000_2010, na.rm = TRUE),
cw_white_alone_2000_2010 = sum(white_alone_2000_2010, na.rm = TRUE),
cw_black_alone_2000_2010 = sum(black_alone_2000_2010, na.rm = TRUE),
cw_indigenous_alone_2000_2010 = sum(indigenous_alone_2000_2010, na.rm = TRUE),
cw_asian_alone_2000_2010 = sum(asian_alone_2000_2010, na.rm = TRUE),
cw_pacific_alone_2000_2010 = sum(pacific_alone_2000_2010, na.rm = TRUE),
cw_hispanic_or_latino_2000_2010 = sum(hispanic_or_latino, na.rm = TRUE),
cw_some_other_race_2000_2010 = sum(some_other_race_2000_2010, na.rm = TRUE),
cw_two_or_more_races_2000_2010 = sum(two_or_more_races_2000_2010, na.rm = TRUE)) %>%
ungroup()
# bach <- weights_bypop_2000_to_2010_grouped %>% mutate(percent_bach = cw_bachelors_or_more_cw_2000_2010 / cw_over_25_2000_2010)
# remove(total_wei)
#totals 2000 to 2010 crosswalked over to 2022
Crosswalk_2010_to_2020 <- Crosswalk_2010_to_2020 %>% mutate(GEOID = as.character(tr2010ge) )
total_weights_bypop_2000_to_2020 <- left_join(weights_bypop_2000_to_2010_grouped, Crosswalk_2010_to_2020)
total_weights_bypop_2000_to_2020 <-  total_weights_bypop_2000_to_2020 %>%
mutate(bachelors_or_more_2000_to_2020 = cw_bachelors_or_more_cw_2000_2010 * wt_pop) %>%
mutate(over_25_2000_to_2020 = cw_over_25_2000_2010 * wt_pop) %>%
mutate(pop_2000_to_2020 = cw_pop_cw_2000_2010 * wt_pop) %>% #
mutate(white_alone_2000_2020 = cw_white_alone_2000_2010 * wt_pop) %>%
mutate(black_alone_2000_2020 = cw_black_alone_2000_2010 * wt_pop) %>%
mutate(indigenous_alone_2000_2020 = cw_indigenous_alone_2000_2010 * wt_pop) %>%
mutate(asian_alone_2000_2020 = cw_asian_alone_2000_2010 * wt_pop) %>%
mutate(hispanic_or_latino_2000_2020 = cw_hispanic_or_latino_2000_2010 * wt_pop) %>%
mutate(pacific_alone_2000_2020 = cw_pacific_alone_2000_2010 * wt_pop) %>%
mutate(some_other_race_2000_2020 = cw_some_other_race_2000_2010 * wt_pop) %>%
mutate(two_or_more_races_2000_2020 = cw_two_or_more_races_2000_2010 * wt_pop)
total_weights_2000_2020_grouped <- total_weights_bypop_2000_to_2020 %>%
group_by(tr2020ge) %>%
summarize(cw_pop_2000_2020 = sum(pop_2000_to_2020, na.rm = TRUE),
cw_over_25_2000_2020 = sum(over_25_2000_to_2020, na.rm = TRUE),
cw_white_alone_2000_2020 = sum(cw_white_alone_2000_2010, na.rm = TRUE),
cw_bachelors_or_more_2000_to_2020 = sum(bachelors_or_more_2000_to_2020, na.rm = TRUE),
cw_black_alone_2000_2020 = sum(black_alone_2000_2020, na.rm = TRUE),
cw_indigenous_alone_2000_2020 = sum(indigenous_alone_2000_2020, na.rm = TRUE),
cw_asian_alone_2000_2020 = sum(asian_alone_2000_2020, na.rm = TRUE),
cw_pacific_alone_2000_2020 = sum(pacific_alone_2000_2020, na.rm = TRUE),
cw_hispanic_or_latino_2000_2020 = sum(hispanic_or_latino_2000_2020, na.rm = TRUE),
cw_some_other_race_2000_2020 = sum(some_other_race_2000_2020, na.rm = TRUE),
cw_two_or_more_races_2000_2020 = sum(two_or_more_races_2000_2020, na.rm = TRUE)) %>%
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2000_to_2020 / cw_over_25_2000_2020 )
write.csv(total_weights_2000_2020_grouped, "2000_demo_data.csv")
#2012 totals crosswalked to 2020
total_weights_bypop_2010_to_2020 <- left_join(dc_total_population_12, Crosswalk_2010_to_2020, by = "GEOID")
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>% rename(population = estimate)
total_weights_bypop_2010_to_2020 <- left_join(percent_bachelors_over_25_2012, total_weights_bypop_2010_to_2020, by = "GEOID")
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>% select(-c(3:17))
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>% select(- NAME.y)
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>% select(-percent_bachelors)
total_weights_bypop_2010_to_2020 <- left_join(total_weights_bypop_2010_to_2020, race_12)
#multiply across crosswalk
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>%
mutate(over_25_2010_2020 = over_25 * wt_pop) %>%
mutate(pop_2010_2020 = population * wt_pop) %>%
mutate(bachelors_or_more_2010_2020 = bachelors_or_more * wt_pop) %>%
mutate(white_alone_2010_2020 = non_hispanic_white * wt_pop) %>%
mutate(black_alone_2010_2020 = non_hispanic_black * wt_pop) %>%
mutate(indigenous_alone_2010_2020 = non_hispanoc_indigenous * wt_pop) %>%
mutate(asian_alone_2010_2020 = non_hispanic_asian * wt_pop) %>%
mutate(hispanic_or_latino_2010_2020 = hispanic_or_latino * wt_pop) %>%
mutate(pacific_alone_2010_2020 = non_hispanic_pacific * wt_pop) %>%
mutate(some_other_race_2010_2020 = some_other_race * wt_pop) %>%
mutate(two_or_more_races_2010_2020 = two_or_more_races * wt_pop)
#group and divide
weights_bypop_2010_2020_grouped <- total_weights_bypop_2010_to_2020 %>%
group_by(tr2020ge) %>%
summarise(cw_over_25_2010_2020 = sum(over_25_2010_2020, na.rm = TRUE),
cw_pop_2010_2020 = sum(pop_2010_2020, na.rm = TRUE),
cw_bachelors_or_more_2010_2020 = sum(bachelors_or_more_2010_2020, na.rm = TRUE),
cw_white_alone_2010_2020 = sum(white_alone_2010_2020, na.rm = TRUE),
cw_black_alone_2010_2020 = sum(black_alone_2010_2020, na.rm = TRUE),
cw_indigenous_alone_2010_2020 = sum(indigenous_alone_2010_2020, na.rm = TRUE),
cw_asian_alone_2010_2020 = sum(asian_alone_2010_2020, na.rm = TRUE),
cw_hispanic_or_latino_2010_2020 = sum(hispanic_or_latino_2010_2020, na.rm = TRUE),
cw_pacific_alone_2010_2020 = sum(pacific_alone_2010_2020, na.rm = TRUE),
cw_some_other_race_2010_2020 = sum(some_other_race_2010_2020, na.rm = TRUE),
cw_two_or_more_races_2010_2020 = sum(two_or_more_races_2010_2020, na.rm = TRUE)) %>%
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2010_2020 /cw_over_25_2010_2020 )
weights_bypop_2000_2020_grouped <- total_weights_bypop_2000_to_2020 %>%
group_by(tr2020ge) %>%
summarize(cw_pop_2000_2020 = sum(pop_2000_to_2020, na.rm = TRUE),
cw_over_25_2000_2020 = sum(over_25_2000_to_2020, na.rm = TRUE),
cw_white_alone_2000_2020 = sum(cw_white_alone_2000_2010, na.rm = TRUE),
cw_bachelors_or_more_2000_to_2020 = sum(bachelors_or_more_2000_to_2020, na.rm = TRUE),
cw_black_alone_2000_2020 = sum(black_alone_2000_2020, na.rm = TRUE),
cw_indigenous_alone_2000_2020 = sum(indigenous_alone_2000_2020, na.rm = TRUE),
cw_asian_alone_2000_2020 = sum(asian_alone_2000_2020, na.rm = TRUE),
cw_pacific_alone_2000_2020 = sum(pacific_alone_2000_2020, na.rm = TRUE),
cw_hispanic_or_latino_2000_2020 = sum(hispanic_or_latino_2000_2020, na.rm = TRUE),
cw_some_other_race_2000_2020 = sum(some_other_race_2000_2020, na.rm = TRUE),
cw_two_or_more_races_2000_2020 = sum(two_or_more_races_2000_2020, na.rm = TRUE)) %>%
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2000_to_2020 / cw_over_25_2000_2020 )
View(weights_bypop_2010_2020_grouped)
View(weights_bypop_2000_2020_grouped)
write.csv(weights_bypop_2000_2020_grouped, "2000_demo_data.csv")
write.csv(weights_bypop_2000_2020_grouped, "2000_demo_data.csv")
write.csv(weights_bypop_2010_2020_grouped, "2012_demo_data.csv")
View(total_weights_bypop_2010_to_2020)
View(weights_bypop_2000_2020_grouped)
View(weights_bypop_2010_2020_grouped)
#2012 totals crosswalked to 2020
total_weights_bypop_2010_to_2020 <- left_join(dc_total_population_12, Crosswalk_2010_to_2020, by = "GEOID")
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>% rename(population = estimate)
total_weights_bypop_2010_to_2020 <- left_join(percent_bachelors_over_25_2012, total_weights_bypop_2010_to_2020, by = "GEOID")
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>% select(-c(3:17))
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>% select(- NAME.y)
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>% select(-percent_bachelors)
total_weights_bypop_2010_to_2020 <- left_join(total_weights_bypop_2010_to_2020, race_12)
#multiply across crosswalk
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>%
mutate(over_25_2010_2020 = over_25 * wt_pop) %>%
mutate(pop_2010_2020 = population * wt_pop) %>%
mutate(bachelors_or_more_2010_2020 = bachelors_or_more * wt_pop) %>%
mutate(white_alone_2010_2020 = non_hispanic_white * wt_pop) %>%
mutate(black_alone_2010_2020 = non_hispanic_black * wt_pop) %>%
mutate(indigenous_alone_2010_2020 = non_hispanoc_indigenous * wt_pop) %>%
mutate(asian_alone_2010_2020 = non_hispanic_asian * wt_pop) %>%
mutate(hispanic_or_latino_2010_2020 = hispanic_or_latino * wt_pop) %>%
mutate(pacific_alone_2010_2020 = non_hispanic_pacific * wt_pop) %>%
mutate(some_other_race_2010_2020 = some_other_race * wt_pop) %>%
mutate(two_or_more_races_2010_2020 = two_or_more_races * wt_pop)
weights_bypop_2010_2020_grouped <- total_weights_bypop_2010_to_2020 %>%
group_by(tr2020ge) %>%
summarise(cw_over_25_2010_2020 = sum(over_25_2010_2020, na.rm = TRUE),
cw_pop_2010_2020 = sum(pop_2010_2020, na.rm = TRUE),
cw_bachelors_or_more_2010_2020 = sum(bachelors_or_more_2010_2020, na.rm = TRUE),
cw_white_alone_2010_2020 = sum(white_alone_2010_2020, na.rm = TRUE),
cw_black_alone_2010_2020 = sum(black_alone_2010_2020, na.rm = FALSE),
cw_indigenous_alone_2010_2020 = sum(indigenous_alone_2010_2020, na.rm = TRUE),
cw_asian_alone_2010_2020 = sum(asian_alone_2010_2020, na.rm = TRUE),
cw_hispanic_or_latino_2010_2020 = sum(hispanic_or_latino_2010_2020, na.rm = TRUE),
cw_pacific_alone_2010_2020 = sum(pacific_alone_2010_2020, na.rm = TRUE),
cw_some_other_race_2010_2020 = sum(some_other_race_2010_2020, na.rm = TRUE),
cw_two_or_more_races_2010_2020 = sum(two_or_more_races_2010_2020, na.rm = TRUE)) %>%
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2010_2020 /cw_over_25_2010_2020 )
sum(weights_bypop_2010_2020_grouped$cw_pop_2010_2020)
weights_bypop_2010_2020_grouped <- total_weights_bypop_2010_to_2020 %>%
group_by(tr2020ge) %>%
summarise(cw_over_25_2010_2020 = sum(over_25_2010_2020, na.rm = TRUE),
cw_pop_2010_2020 = sum(pop_2010_2020, na.rm = TRUE),
cw_bachelors_or_more_2010_2020 = sum(bachelors_or_more_2010_2020, na.rm = TRUE),
cw_white_alone_2010_2020 = sum(white_alone_2010_2020, na.rm = TRUE),
cw_black_alone_2010_2020 = sum(black_alone_2010_2020, na.rm = TRUE),
cw_indigenous_alone_2010_2020 = sum(indigenous_alone_2010_2020, na.rm = TRUE),
cw_asian_alone_2010_2020 = sum(asian_alone_2010_2020, na.rm = TRUE),
cw_hispanic_or_latino_2010_2020 = sum(hispanic_or_latino_2010_2020, na.rm = TRUE),
cw_pacific_alone_2010_2020 = sum(pacific_alone_2010_2020, na.rm = TRUE),
cw_some_other_race_2010_2020 = sum(some_other_race_2010_2020, na.rm = TRUE),
cw_two_or_more_races_2010_2020 = sum(two_or_more_races_2010_2020, na.rm = TRUE)) %>%
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2010_2020 /cw_over_25_2010_2020 )
sum(weights_bypop_2010_2020_grouped$cw_pop_2010_2020)
#totals 2000 to 2010 crosswalked over to 2022
Crosswalk_2010_to_2020 <- Crosswalk_2010_to_2020 %>% mutate(GEOID = as.character(tr2010ge) )
total_weights_bypop_2000_to_2020 <- left_join(weights_bypop_2000_to_2010_grouped, Crosswalk_2010_to_2020)
total_weights_bypop_2000_to_2020 <-  total_weights_bypop_2000_to_2020 %>%
mutate(bachelors_or_more_2000_to_2020 = cw_bachelors_or_more_cw_2000_2010 * wt_pop) %>%
mutate(over_25_2000_to_2020 = cw_over_25_2000_2010 * wt_pop) %>%
mutate(pop_2000_to_2020 = cw_pop_cw_2000_2010 * wt_pop) %>% #
mutate(white_alone_2000_2020 = cw_white_alone_2000_2010 * wt_pop) %>%
mutate(black_alone_2000_2020 = cw_black_alone_2000_2010 * wt_pop) %>%
mutate(indigenous_alone_2000_2020 = cw_indigenous_alone_2000_2010 * wt_pop) %>%
mutate(asian_alone_2000_2020 = cw_asian_alone_2000_2010 * wt_pop) %>%
mutate(hispanic_or_latino_2000_2020 = cw_hispanic_or_latino_2000_2010 * wt_pop) %>%
mutate(pacific_alone_2000_2020 = cw_pacific_alone_2000_2010 * wt_pop) %>%
mutate(some_other_race_2000_2020 = cw_some_other_race_2000_2010 * wt_pop) %>%
mutate(two_or_more_races_2000_2020 = cw_two_or_more_races_2000_2010 * wt_pop)
weights_bypop_2000_2020_grouped <- total_weights_bypop_2000_to_2020 %>%
group_by(tr2020ge) %>%
summarize(cw_pop_2000_2020 = sum(pop_2000_to_2020, na.rm = TRUE),
cw_over_25_2000_2020 = sum(over_25_2000_to_2020, na.rm = TRUE),
cw_white_alone_2000_2020 = sum(white_alone_2000_2010, na.rm = TRUE),
cw_bachelors_or_more_2000_to_2020 = sum(bachelors_or_more_2000_to_2020, na.rm = TRUE),
cw_black_alone_2000_2020 = sum(black_alone_2000_2020, na.rm = TRUE),
cw_indigenous_alone_2000_2020 = sum(indigenous_alone_2000_2020, na.rm = TRUE),
cw_asian_alone_2000_2020 = sum(asian_alone_2000_2020, na.rm = TRUE),
cw_pacific_alone_2000_2020 = sum(pacific_alone_2000_2020, na.rm = TRUE),
cw_hispanic_or_latino_2000_2020 = sum(hispanic_or_latino_2000_2020, na.rm = TRUE),
cw_some_other_race_2000_2020 = sum(some_other_race_2000_2020, na.rm = TRUE),
cw_two_or_more_races_2000_2020 = sum(two_or_more_races_2000_2020, na.rm = TRUE)) %>%
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2000_to_2020 / cw_over_25_2000_2020 )
#totals crosswalk 2000-2010 - pop / bachelors degrees
Crosswalk_2000_to_2010 <- Crosswalk_2000_to_2010 %>% mutate(GEOID = as.character(tr2000ge))
total_weights_bypop_2000_to_2010 <- left_join(dc_total_population_2000, Crosswalk_2000_to_2010, by = "GEOID")
total_weights_bypop_2000_to_2010 <- total_weights_bypop_2000_to_2010  %>% rename(population = value)
total_weights_bypop_2000_to_2010 <- left_join(percent_bachelors_over_25_2000, total_weights_bypop_2000_to_2010, by = "GEOID")
total_weights_bypop_2000_to_2010 <- total_weights_bypop_2000_to_2010 %>% select(-c(3:45))
total_weights_bypop_2000_to_2010 <- total_weights_bypop_2000_to_2010 %>% select(-NAME, -variable)
total_weights_bypop_2000_to_2010 <- left_join(total_weights_bypop_2000_to_2010, race_2000)
#multiply across the crosswalk
total_weights_bypop_2000_to_2010 <- total_weights_bypop_2000_to_2010 %>%
mutate(over_25_2000_2010 = over_25 * wt_pop) %>%
mutate(bachelors_or_more_cw_2000_2010 =  bachelors_or_more * wt_pop) %>%
mutate(pop_cw_2000_2010 = population * wt_pop) %>%
mutate(white_alone_2000_2010 = white_alone * wt_pop) %>%
mutate(black_alone_2000_2010 = black_alone * wt_pop) %>%
mutate(indigenous_alone_2000_2010 = indigenous_alone * wt_pop) %>%
mutate(asian_alone_2000_2010 = asian_alone * wt_pop) %>%
mutate(hispanic_or_latino = hispanic_or_latino * wt_pop) %>%
mutate(pacific_alone_2000_2010 = pacific * wt_pop) %>%
mutate(some_other_race_2000_2010 = some_other_race * wt_pop) %>%
mutate(two_or_more_races_2000_2010 = some_other_race * wt_pop)
weights_bypop_2000_to_2010_grouped <- total_weights_bypop_2000_to_2010 %>%
group_by(tr2010ge) %>%
summarize(cw_over_25_2000_2010 = sum(over_25_2000_2010, na.rm = TRUE),
cw_bachelors_or_more_cw_2000_2010 = sum(bachelors_or_more_cw_2000_2010, na.rm = TRUE),
cw_pop_cw_2000_2010 =  sum(pop_cw_2000_2010, na.rm = TRUE),
cw_white_alone_2000_2010 = sum(white_alone_2000_2010, na.rm = TRUE),
cw_black_alone_2000_2010 = sum(black_alone_2000_2010, na.rm = TRUE),
cw_indigenous_alone_2000_2010 = sum(indigenous_alone_2000_2010, na.rm = TRUE),
cw_asian_alone_2000_2010 = sum(asian_alone_2000_2010, na.rm = TRUE),
cw_pacific_alone_2000_2010 = sum(pacific_alone_2000_2010, na.rm = TRUE),
cw_hispanic_or_latino_2000_2010 = sum(hispanic_or_latino, na.rm = TRUE),
cw_some_other_race_2000_2010 = sum(some_other_race_2000_2010, na.rm = TRUE),
cw_two_or_more_races_2000_2010 = sum(two_or_more_races_2000_2010, na.rm = TRUE)) %>%
ungroup()
Crosswalk_2010_to_2020 <- Crosswalk_2010_to_2020 %>% mutate(GEOID = as.character(tr2010ge) )
total_weights_bypop_2000_to_2020 <- left_join(weights_bypop_2000_to_2010_grouped, Crosswalk_2010_to_2020)
total_weights_bypop_2000_to_2020 <-  total_weights_bypop_2000_to_2020 %>%
mutate(bachelors_or_more_2000_to_2020 = cw_bachelors_or_more_cw_2000_2010 * wt_pop) %>%
mutate(over_25_2000_to_2020 = cw_over_25_2000_2010 * wt_pop) %>%
mutate(pop_2000_to_2020 = cw_pop_cw_2000_2010 * wt_pop) %>% #
mutate(white_alone_2000_2020 = cw_white_alone_2000_2010 * wt_pop) %>%
mutate(black_alone_2000_2020 = cw_black_alone_2000_2010 * wt_pop) %>%
mutate(indigenous_alone_2000_2020 = cw_indigenous_alone_2000_2010 * wt_pop) %>%
mutate(asian_alone_2000_2020 = cw_asian_alone_2000_2010 * wt_pop) %>%
mutate(hispanic_or_latino_2000_2020 = cw_hispanic_or_latino_2000_2010 * wt_pop) %>%
mutate(pacific_alone_2000_2020 = cw_pacific_alone_2000_2010 * wt_pop) %>%
mutate(some_other_race_2000_2020 = cw_some_other_race_2000_2010 * wt_pop) %>%
mutate(two_or_more_races_2000_2020 = cw_two_or_more_races_2000_2010 * wt_pop)
weights_bypop_2000_2020_grouped <- total_weights_bypop_2000_to_2020 %>%
group_by(tr2020ge) %>%
summarize(cw_pop_2000_2020 = sum(pop_2000_to_2020, na.rm = TRUE),
cw_over_25_2000_2020 = sum(over_25_2000_to_2020, na.rm = TRUE),
cw_white_alone_2000_2020 = sum(white_alone_2000_2020, na.rm = TRUE),
cw_bachelors_or_more_2000_to_2020 = sum(bachelors_or_more_2000_to_2020, na.rm = TRUE),
cw_black_alone_2000_2020 = sum(black_alone_2000_2020, na.rm = TRUE),
cw_indigenous_alone_2000_2020 = sum(indigenous_alone_2000_2020, na.rm = TRUE),
cw_asian_alone_2000_2020 = sum(asian_alone_2000_2020, na.rm = TRUE),
cw_pacific_alone_2000_2020 = sum(pacific_alone_2000_2020, na.rm = TRUE),
cw_hispanic_or_latino_2000_2020 = sum(hispanic_or_latino_2000_2020, na.rm = TRUE),
cw_some_other_race_2000_2020 = sum(some_other_race_2000_2020, na.rm = TRUE),
cw_two_or_more_races_2000_2020 = sum(two_or_more_races_2000_2020, na.rm = TRUE)) %>%
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2000_to_2020 / cw_over_25_2000_2020 )
write.csv(weights_bypop_2000_2020_grouped, "2000_demo_data.csv")
weights_bypop_2000_2020_grouped <- total_weights_bypop_2000_to_2020 %>%
group_by(tr2020ge) %>%
summarize(cw_pop_2000_2020 = sum(pop_2000_to_2020, na.rm = TRUE),
cw_over_25_2000_2020 = sum(over_25_2000_to_2020, na.rm = TRUE),
cw_white_alone_2000_2020 = sum(white_alone_2000_2020, na.rm = TRUE),
cw_bachelors_or_more_2000_to_2020 = sum(bachelors_or_more_2000_to_2020, na.rm = TRUE),
cw_black_alone_2000_2020 = sum(black_alone_2000_2020, na.rm = TRUE),
cw_indigenous_alone_2000_2020 = sum(indigenous_alone_2000_2020, na.rm = TRUE),
cw_asian_alone_2000_2020 = sum(asian_alone_2000_2020, na.rm = TRUE),
cw_pacific_alone_2000_2020 = sum(pacific_alone_2000_2020, na.rm = TRUE),
cw_hispanic_or_latino_2000_2020 = sum(hispanic_or_latino_2000_2020, na.rm = TRUE),
cw_some_other_race_2000_2020 = sum(some_other_race_2000_2020, na.rm = TRUE),
cw_two_or_more_races_2000_2020 = sum(two_or_more_races_2000_2020, na.rm = TRUE)) %>%
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2000_to_2020 / cw_over_25_2000_2020 )
write.csv(weights_bypop_2000_2020_grouped, "2000_demo_data.csv")
View(race_22)
total_weights_bypop_2010_to_2020 <- left_join(dc_total_population_12, Crosswalk_2010_to_2020, by = "GEOID")
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>% rename(population = estimate)
total_weights_bypop_2010_to_2020 <- left_join(percent_bachelors_over_25_2012, total_weights_bypop_2010_to_2020, by = "GEOID")
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>% select(-c(3:17))
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>% select(- NAME.y)
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>% select(-percent_bachelors)
total_weights_bypop_2010_to_2020 <- left_join(total_weights_bypop_2010_to_2020, race_12)
View(total_weights_bypop_2010_to_2020)
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>%
mutate(over_25_2010_2020 = over_25 * wt_pop) %>%
mutate(pop_2010_2020 = population * wt_pop) %>%
mutate(bachelors_or_more_2010_2020 = bachelors_or_more * wt_pop) %>%
mutate(white_alone_2010_2020 = non_hispanic_white * wt_pop) %>%
mutate(black_alone_2010_2020 = non_hispanic_black * wt_pop) %>%
mutate(indigenous_alone_2010_2020 = non_hispanoc_indigenous * wt_pop) %>%
mutate(asian_alone_2010_2020 = non_hispanic_asian * wt_pop) %>%
mutate(hispanic_or_latino_2010_2020 = hispanic_or_latino * wt_pop) %>%
mutate(pacific_alone_2010_2020 = non_hispanic_pacific * wt_pop) %>%
mutate(some_other_race_2010_2020 = some_other_race * wt_pop) %>%
mutate(two_or_more_races_2010_2020 = two_or_more_races * wt_pop)
weights_bypop_2010_2020_grouped_2 <- total_weights_bypop_2010_to_2020 %>%
group_by(tr2020ge, NAME) %>%
summarise(cw_over_25_2010_2020 = sum(over_25_2010_2020, na.rm = TRUE),
cw_pop_2010_2020 = sum(pop_2010_2020, na.rm = TRUE),
cw_bachelors_or_more_2010_2020 = sum(bachelors_or_more_2010_2020, na.rm = TRUE),
cw_white_alone_2010_2020 = sum(white_alone_2010_2020, na.rm = TRUE),
cw_black_alone_2010_2020 = sum(black_alone_2010_2020, na.rm = TRUE),
cw_indigenous_alone_2010_2020 = sum(indigenous_alone_2010_2020, na.rm = TRUE),
cw_asian_alone_2010_2020 = sum(asian_alone_2010_2020, na.rm = TRUE),
cw_hispanic_or_latino_2010_2020 = sum(hispanic_or_latino_2010_2020, na.rm = TRUE),
cw_pacific_alone_2010_2020 = sum(pacific_alone_2010_2020, na.rm = TRUE),
cw_some_other_race_2010_2020 = sum(some_other_race_2010_2020, na.rm = TRUE),
cw_two_or_more_races_2010_2020 = sum(two_or_more_races_2010_2020, na.rm = TRUE))
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2010_2020 /cw_over_25_2010_2020 )
weights_bypop_2010_2020_grouped_2 <- total_weights_bypop_2010_to_2020 %>%
group_by(tr2020ge) %>%
summarise(cw_over_25_2010_2020 = sum(over_25_2010_2020, na.rm = TRUE),
cw_pop_2010_2020 = sum(pop_2010_2020, na.rm = TRUE),
cw_bachelors_or_more_2010_2020 = sum(bachelors_or_more_2010_2020, na.rm = TRUE),
cw_white_alone_2010_2020 = sum(white_alone_2010_2020, na.rm = TRUE),
cw_black_alone_2010_2020 = sum(black_alone_2010_2020, na.rm = TRUE),
cw_indigenous_alone_2010_2020 = sum(indigenous_alone_2010_2020, na.rm = TRUE),
cw_asian_alone_2010_2020 = sum(asian_alone_2010_2020, na.rm = TRUE),
cw_hispanic_or_latino_2010_2020 = sum(hispanic_or_latino_2010_2020, na.rm = TRUE),
cw_pacific_alone_2010_2020 = sum(pacific_alone_2010_2020, na.rm = TRUE),
cw_some_other_race_2010_2020 = sum(some_other_race_2010_2020, na.rm = TRUE),
cw_two_or_more_races_2010_2020 = sum(two_or_more_races_2010_2020, na.rm = TRUE))
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2010_2020 /cw_over_25_2010_2020 )
#2012 totals crosswalked to 2020
total_weights_bypop_2010_to_2020 <- left_join(dc_total_population_12, Crosswalk_2010_to_2020, by = "GEOID")
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>% rename(population = estimate)
total_weights_bypop_2010_to_2020 <- left_join(percent_bachelors_over_25_2012, total_weights_bypop_2010_to_2020, by = "GEOID")
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>% select(-c(3:17))
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>% select(- NAME.y)
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>% select(-percent_bachelors)
total_weights_bypop_2010_to_2020 <- left_join(total_weights_bypop_2010_to_2020, race_12)
#multiply across crosswalk
total_weights_bypop_2010_to_2020 <- total_weights_bypop_2010_to_2020 %>%
mutate(over_25_2010_2020 = over_25 * wt_pop) %>%
mutate(pop_2010_2020 = population * wt_pop) %>%
mutate(bachelors_or_more_2010_2020 = bachelors_or_more * wt_pop) %>%
mutate(white_alone_2010_2020 = non_hispanic_white * wt_pop) %>%
mutate(black_alone_2010_2020 = non_hispanic_black * wt_pop) %>%
mutate(indigenous_alone_2010_2020 = non_hispanoc_indigenous * wt_pop) %>%
mutate(asian_alone_2010_2020 = non_hispanic_asian * wt_pop) %>%
mutate(hispanic_or_latino_2010_2020 = hispanic_or_latino * wt_pop) %>%
mutate(pacific_alone_2010_2020 = non_hispanic_pacific * wt_pop) %>%
mutate(some_other_race_2010_2020 = some_other_race * wt_pop) %>%
mutate(two_or_more_races_2010_2020 = two_or_more_races * wt_pop)
#group and divide
weights_bypop_2010_2020_grouped <- total_weights_bypop_2010_to_2020 %>%
group_by(tr2020ge) %>%
summarise(cw_over_25_2010_2020 = sum(over_25_2010_2020, na.rm = TRUE),
cw_pop_2010_2020 = sum(pop_2010_2020, na.rm = TRUE),
cw_bachelors_or_more_2010_2020 = sum(bachelors_or_more_2010_2020, na.rm = TRUE),
cw_white_alone_2010_2020 = sum(white_alone_2010_2020, na.rm = TRUE),
cw_black_alone_2010_2020 = sum(black_alone_2010_2020, na.rm = TRUE),
cw_indigenous_alone_2010_2020 = sum(indigenous_alone_2010_2020, na.rm = TRUE),
cw_asian_alone_2010_2020 = sum(asian_alone_2010_2020, na.rm = TRUE),
cw_hispanic_or_latino_2010_2020 = sum(hispanic_or_latino_2010_2020, na.rm = TRUE),
cw_pacific_alone_2010_2020 = sum(pacific_alone_2010_2020, na.rm = TRUE),
cw_some_other_race_2010_2020 = sum(some_other_race_2010_2020, na.rm = TRUE),
cw_two_or_more_races_2010_2020 = sum(two_or_more_races_2010_2020, na.rm = TRUE)) %>%
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2010_2020 /cw_over_25_2010_2020 )
sum(weights_bypop_2010_2020_grouped$cw_pop_2010_2020)
weights_bypop_2010_2020_grouped_2 <- total_weights_bypop_2010_to_2020 %>%
group_by(tr2020ge, NAME) %>%
summarise(cw_over_25_2010_2020 = sum(over_25_2010_2020, na.rm = TRUE),
cw_pop_2010_2020 = sum(pop_2010_2020, na.rm = TRUE),
cw_bachelors_or_more_2010_2020 = sum(bachelors_or_more_2010_2020, na.rm = TRUE),
cw_white_alone_2010_2020 = sum(white_alone_2010_2020, na.rm = TRUE),
cw_black_alone_2010_2020 = sum(black_alone_2010_2020, na.rm = TRUE),
cw_indigenous_alone_2010_2020 = sum(indigenous_alone_2010_2020, na.rm = TRUE),
cw_asian_alone_2010_2020 = sum(asian_alone_2010_2020, na.rm = TRUE),
cw_hispanic_or_latino_2010_2020 = sum(hispanic_or_latino_2010_2020, na.rm = TRUE),
cw_pacific_alone_2010_2020 = sum(pacific_alone_2010_2020, na.rm = TRUE),
cw_some_other_race_2010_2020 = sum(some_other_race_2010_2020, na.rm = TRUE),
cw_two_or_more_races_2010_2020 = sum(two_or_more_races_2010_2020, na.rm = TRUE)) %>%
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2010_2020 /cw_over_25_2010_2020 )
sum(weights_bypop_2010_2020_grouped$cw_pop_2010_2020)
weights_bypop_2010_2020_grouped_2 <- total_weights_bypop_2010_to_2020 %>%
group_by(tr2020ge) %>%
summarise(cw_over_25_2010_2020 = sum(over_25_2010_2020, na.rm = TRUE),
cw_pop_2010_2020 = sum(pop_2010_2020, na.rm = TRUE),
cw_bachelors_or_more_2010_2020 = sum(bachelors_or_more_2010_2020, na.rm = TRUE),
cw_white_alone_2010_2020 = sum(white_alone_2010_2020, na.rm = TRUE),
cw_black_alone_2010_2020 = sum(black_alone_2010_2020, na.rm = TRUE),
cw_indigenous_alone_2010_2020 = sum(indigenous_alone_2010_2020, na.rm = TRUE),
cw_asian_alone_2010_2020 = sum(asian_alone_2010_2020, na.rm = TRUE),
cw_hispanic_or_latino_2010_2020 = sum(hispanic_or_latino_2010_2020, na.rm = TRUE),
cw_pacific_alone_2010_2020 = sum(pacific_alone_2010_2020, na.rm = TRUE),
cw_some_other_race_2010_2020 = sum(some_other_race_2010_2020, na.rm = TRUE),
cw_two_or_more_races_2010_2020 = sum(two_or_more_races_2010_2020, na.rm = TRUE),
NAME = NAME) %>%
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2010_2020 /cw_over_25_2010_2020 )
sum(weights_bypop_2010_2020_grouped$cw_pop_2010_2020)
weights_bypop_2010_2020_grouped <- total_weights_bypop_2010_to_2020 %>%
group_by(tr2020ge) %>%
summarise(cw_over_25_2010_2020 = sum(over_25_2010_2020, na.rm = TRUE),
cw_pop_2010_2020 = sum(pop_2010_2020, na.rm = TRUE),
cw_bachelors_or_more_2010_2020 = sum(bachelors_or_more_2010_2020, na.rm = TRUE),
cw_white_alone_2010_2020 = sum(white_alone_2010_2020, na.rm = TRUE),
cw_black_alone_2010_2020 = sum(black_alone_2010_2020, na.rm = TRUE),
cw_indigenous_alone_2010_2020 = sum(indigenous_alone_2010_2020, na.rm = TRUE),
cw_asian_alone_2010_2020 = sum(asian_alone_2010_2020, na.rm = TRUE),
cw_hispanic_or_latino_2010_2020 = sum(hispanic_or_latino_2010_2020, na.rm = TRUE),
cw_pacific_alone_2010_2020 = sum(pacific_alone_2010_2020, na.rm = TRUE),
cw_some_other_race_2010_2020 = sum(some_other_race_2010_2020, na.rm = TRUE),
cw_two_or_more_races_2010_2020 = sum(two_or_more_races_2010_2020, na.rm = TRUE)) %>%
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2010_2020 /cw_over_25_2010_2020 )
sum(weights_bypop_2010_2020_grouped$cw_pop_2010_2020)
weights_bypop_2010_2020_grouped_2 <- total_weights_bypop_2010_to_2020 %>%
group_by(tr2020ge) %>%
summarise(cw_over_25_2010_2020 = sum(over_25_2010_2020, na.rm = TRUE),
cw_pop_2010_2020 = sum(pop_2010_2020, na.rm = TRUE),
cw_bachelors_or_more_2010_2020 = sum(bachelors_or_more_2010_2020, na.rm = TRUE),
cw_white_alone_2010_2020 = sum(white_alone_2010_2020, na.rm = TRUE),
cw_black_alone_2010_2020 = sum(black_alone_2010_2020, na.rm = TRUE),
cw_indigenous_alone_2010_2020 = sum(indigenous_alone_2010_2020, na.rm = TRUE),
cw_asian_alone_2010_2020 = sum(asian_alone_2010_2020, na.rm = TRUE),
cw_hispanic_or_latino_2010_2020 = sum(hispanic_or_latino_2010_2020, na.rm = TRUE),
cw_pacific_alone_2010_2020 = sum(pacific_alone_2010_2020, na.rm = TRUE),
cw_some_other_race_2010_2020 = sum(some_other_race_2010_2020, na.rm = TRUE),
cw_two_or_more_races_2010_2020 = sum(two_or_more_races_2010_2020, na.rm = TRUE),
NAME = NAME) %>%
ungroup() %>%
mutate(percent_bachelors = cw_bachelors_or_more_2010_2020 /cw_over_25_2010_2020 )
sum(weights_bypop_2010_2020_grouped$cw_pop_2010_2020)
